<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gift Card Generator</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <div class="overlay" id="stripeOverlay"><div class="stripe-loader"></div></div>
  <div class="progress-bar" id="progressBar"></div>

  <h1>Select a Gift Card</h1>
  <div id="card-options">
    <div class="card-option" data-card="Amazon">
      <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon">
      <p>Amazon</p>
    </div>
    <div class="card-option" data-card="Flipkart">
      <img src="https://1000logos.net/wp-content/uploads/2021/02/Flipkart-logo.png" alt="Flipkart">
      <p>Flipkart</p>
    </div>
    <div class="card-option" data-card="BookMyShow">
      <img src="https://assets-in.bmscdn.com/static/2023/03/bms-logo-new.png" alt="BookMyShow">
      <p>BookMyShow</p>
    </div>
    <div class="card-option" data-card="Zomato">
      <img src="https://upload.wikimedia.org/wikipedia/commons/7/75/Zomato_logo.png" alt="Zomato">
      <p>Zomato</p>
    </div>
  </div>

  <div id="amount-section" class="section">
    <h2>Enter Amount for <span id="selected-card"></span></h2>
    <div style="font-size: 22px;">$ <input type="number" id="amount" placeholder="Enter amount" /></div>
    <input type="email" id="email" placeholder="Enter your email to receive card" />
    <br><button onclick="delayNext('payment-section', 2000)">Proceed to Payment</button>
  </div>

  <div id="payment-section" class="section">
    <h2>Select Payment Method</h2>
    <button onclick="delayNext('loading-section', 3000)">Pay with UPI</button>
    <button onclick="delayNext('card-form', 3000)">Credit/Debit Card</button>
  </div>

  <div id="card-form" class="section">
    <h2>Enter Card Details</h2>
    <div class="secure-label"><i class="fas fa-lock"></i>SSL Secured</div>
    <input type="text" id="card-number" placeholder="Card Number" maxlength="19" oninput="formatCardNumber(this)" />
    <br>
    <input type="text" placeholder="Expiry Date (MM/YY)" />
    <br>
    <input type="password" placeholder="CVV" />
    <br>
    <input type="text" placeholder="Card Holder Name" />
    <br>
    <button onclick="processCardPayment()">Pay Now</button>
  </div>

  <div id="loading-section" class="section">
    <h2>Processing Payment...</h2>
    <div class="spinner"></div>
  </div>

  <div id="confirmation-section" class="section">
    <h2>Payment Successful</h2>
    <div class="green-tick">âœ”</div>
    <p>Your gift card code:</p>
    <h3 id="gift-code"></h3>
    <button class="copy-btn" onclick="copyCode()">Copy Code</button>
  </div>

  <script src="script.js"></script>
</body>
</html>
body {
  font-family: 'Poppins', sans-serif;
  text-align: center;
  background-color: #f5f5f5;
  margin: 0;
  padding: 20px;
  color: #333;
}

h1 {
  margin-top: 0;
  font-size: 2em;
}

#card-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 20px;
}

.card-option {
  background: white;
  border-radius: 10px;
  margin: 10px;
  padding: 15px;
  width: 140px;
  cursor: pointer;
  transition: 0.3s;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.card-option:hover {
  transform: translateY(-5px);
  background: #f0f8ff;
}

.card-option img {
  width: 100px;
  height: 60px;
  object-fit: contain;
}

.section {
  display: none;
  margin-top: 30px;
  padding: 20px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

input {
  padding: 10px;
  margin: 8px;
  width: 70%;
  border-radius: 8px;
  border: 1px solid #ccc;
}

button {
  padding: 10px 20px;
  margin-top: 15px;
  border: none;
  border-radius: 8px;
  background-color: #007bff;
  color: white;
  cursor: pointer;
  font-weight: bold;
}

button:hover {
  background-color: #0056b3;
}

.spinner {
  width: 60px;
  height: 60px;
  border: 6px solid #ccc;
  border-top: 6px solid #007bff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 30px auto;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.green-tick {
  font-size: 48px;
  color: green;
  font-weight: bold;
}

.copy-btn {
  background-color: #28a745;
}

.copy-btn:hover {
  background-color: #1e7e34;
}

.stripe-loader {
  width: 100px;
  height: 100px;
  border: 6px solid #007bff;
  border-top: 6px solid transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 100px auto;
}

.overlay {
  display: none;
  position: fixed;
  top: 0; left: 0;
  height: 100%; width: 100%;
  background: rgba(255, 255, 255, 0.9);
  z-index: 999;
  justify-content: center;
  align-items: center;
}

.progress-bar {
  position: fixed;
  top: 0;
  left: 0;
  width: 0%;
  height: 5px;
  background: #007bff;
  transition: width 0.3s;
}

.secure-label {
  color: green;
  font-size: 14px;
  margin-bottom: 8px;
}
let selectedCard = "";
let progressBar = document.getElementById("progress-bar");

function selectCard(card) {
  selectedCard = card;
  document.getElementById("selected-card").innerText = card;
  document.getElementById("card-options").style.display = "none";
  showSection("amount-section");
}

function delayNext(sectionId, delay = 2000) {
  hideAllSections();
  showSection("loading-section");
  setTimeout(() => {
    hideAllSections();
    showSection(sectionId);
  }, delay);
}

function processCardPayment() {
  hideAllSections();
  showStripeAnimation();
  setTimeout(() => {
    hideStripeAnimation();
    showSection("loading-section");
    setTimeout(() => {
      hideAllSections();
      showSection("confirmation-section");
      document.getElementById("gift-code").innerText = generateCodeText();
    }, 2500);
  }, 2500);
}

function showSection(id) {
  document.getElementById(id).style.display = "block";
}

function hideAllSections() {
  document.querySelectorAll(".section").forEach(section => {
    section.style.display = "none";
  });
}

function generateCodeText() {
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  let code = "";
  for (let i = 0; i < 13; i++) {
    code += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return code;
}

function copyCode() {
  const codeText = document.getElementById("gift-code").innerText;
  navigator.clipboard.writeText(codeText).then(() => {
    alert("Code copied to clipboard!");
  });
}

function formatCardNumber(input) {
  input.value = input.value.replace(/\D/g, '').replace(/(.{4})/g, '$1 ').trim();
}

function showStripeAnimation() {
  document.getElementById("overlay").style.display = "flex";
  let width = 0;
  let interval = setInterval(() => {
    if (width >= 100) {
      clearInterval(interval);
    } else {
      width++;
      document.getElementById("progress-bar").style.width = width + "%";
    }
  }, 40);
}

function hideStripeAnimation() {
  document.getElementById("overlay").style.display = "none";
  document.getElementById("progress-bar").style.width = "0%";
}
